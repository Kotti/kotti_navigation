<div class="${use_container_class and 'container' or None}"
     id="navigation-tree">
  <ul class="${nav_class}">

    <li tal:condition="show_menu
                       and location != 'top'"
        tal:define="view_name 'navigation-widget-menu-{0}'.format(location)"
        tal:replace="api.render_view(view_name, context=context)" />
    <li tal:condition="show_divider" class="divider"></li>

    <li tal:condition="label and context.parent and items" class="nav-header">
      ${label}
    </li>
    <li tal:condition="label and context.parent and items" class="divider">
    </li>
    <li tal:define="active root == request.context and 'active' or ''"
        tal:condition="include_root"
        class="${active}">
      <a href="${api.url(root)}"
         title="${getattr(root, 'description', None)}">
        ${root.title}
      </a>
    </li>

    <tal:items tal:repeat="item items">
      <tal:dropdown tal:condition="item.children and dropdowns">
        <li tal:define="hidden not item.in_navigation and 'hidden' or ''"
            class="${hidden}">
          <a href="${api.url(item)}"
             title="${getattr(item, 'description', None)}"
             class="nav-list-careted">
            ${item.title}
          </a>
          <span class="dropdown"
              tal:define="hidden not item.in_navigation and 'hidden' or ''">
            <a href="${api.url(item)}"
               class="dropdown-toggle nav-list-caret"
               data-toggle="dropdown"
               title="${getattr(item, 'description', None)}">
              <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
              <tal:repeat tal:repeat="child item.children">
                <li>
                  <a href="${api.url(child)}"
                     title="${getattr(child, 'description', None)}">
                    ${child.title}
                  </a>
                </li>
              </tal:repeat>
            </ul>
          </span>
        </li>
      </tal:dropdown>

      <tal:no_dropdown>
        <tal:replace
            tal:replace="api.render_view('nav-recurse', context=item)" />
      </tal:no_dropdown>

    </tal:items>

  </ul>
</div>
