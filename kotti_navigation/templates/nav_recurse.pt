<li tal:define="item context;
                active item == request.context and 'active' or '';
                hidden not item.in_navigation and 'hidden' or ''"
    class="${active} ${hidden}">
  <a href="${api.url(item)}"
     title="${getattr(item, 'description', None)}">
    ${item.title}
  </a>
  <tal:is_tree_open tal:condition="tree_is_open_all or is_node_open(item, request)">
    <tal:children tal:condition="children">
      <tal:repeat tal:repeat="child children">
        <ul class="${nav_class}">
          <tal:replace 
            tal:condition="location == 'top'"
            tal:replace="api.render_view('nav-recurse-top', context=child)" />
          <tal:replace 
            tal:condition="location == 'left'"
            tal:replace="api.render_view('nav-recurse-left', context=child)" />
          <tal:replace 
            tal:condition="location == 'right'"
            tal:replace="api.render_view('nav-recurse-right', context=child)" />
          <tal:replace 
            tal:condition="location == 'abovecontent'"
            tal:replace="api.render_view('nav-recurse-abovecontent', context=child)" />
          <tal:replace 
            tal:condition="location == 'belowcontent'"
            tal:replace="api.render_view('nav-recurse-belowcontent', context=child)" />
          <tal:replace 
            tal:condition="location == 'beforebodyend'"
            tal:replace="api.render_view('nav-recurse-beforebodyend', context=child)" />
        </ul>
      </tal:repeat>
    </tal:children>
  </tal:is_tree_open>
</li>
